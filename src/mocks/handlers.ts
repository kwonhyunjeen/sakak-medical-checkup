import { http, HttpResponse } from "msw";
import type { GetMedicalCheckupAPIRequestBody, GetMedicalCheckupAPIResponseBody } from "../apis/getMedicalCheckup";
import type {
  RequestMultiFactorAuthAPIRequestBody,
  RequestMultiFactorAuthAPIResponseBody,
} from "../apis/requestMultiFactorAuth";
import type { MultiFactorInfo } from "../schemas/auth";

export const handlers = [
  http.post("http://localhost:5173/candiy-api/v1/nhis/checkup", async ({ request }) => {
    const body = (await request.json()) as
      | (RequestMultiFactorAuthAPIRequestBody & { isContinue: "0" })
      | (GetMedicalCheckupAPIRequestBody & { isContinue: "1" });

    // requestMultiFactorAuth
    if (body.isContinue === "0") {
      const mockMultiFactorInfo: MultiFactorInfo = {
        transactionId: "62a8f9b3-21cd-47e5-9c18-f834d59b7da2",
        jobIndex: 0,
        threadIndex: 0,
        multiFactorTimestamp: Math.floor(Date.now() / 1000),
      };

      return HttpResponse.json({
        status: "success",
        data: mockMultiFactorInfo,
      } satisfies RequestMultiFactorAuthAPIResponseBody);
    }

    // getMedicalCheckup
    else if (body.isContinue === "1") {
      return HttpResponse.json({
        status: "success",
        data: {
          patientName: "홍길동",
          overviewList: [
            {
              checkupDate: "2024-03-19",
              height: "175.5",
              weight: "68.7",
              waist: "78.3",
              BMI: "22.3",
              vision: "1.2/1.2",
              hearing: "정상/정상",
              bloodPressure: "118/78",
              proteinuria: "음성",
              hemoglobin: "15.3",
              fastingBloodGlucose: "88",
              totalCholesterol: "175",
              HDLCholesterol: "58",
              triglyceride: "115",
              LDLCholesterol: "105",
              serumCreatinine: "0.8",
              GFR: "92",
              AST: "19",
              ALT: "16",
              yGPT: "24",
              chestXrayResult: "정상",
              osteoporosis: "정상",
              evaluation: "정A",
            },
            {
              checkupDate: "2023-01-11",
              height: "175.4",
              weight: "71.2",
              waist: "80.5",
              BMI: "23.2",
              vision: "1.2/1.0",
              hearing: "정상/정상",
              bloodPressure: "122/82",
              proteinuria: "음성",
              hemoglobin: "14.8",
              fastingBloodGlucose: "92",
              totalCholesterol: "187",
              HDLCholesterol: "53",
              triglyceride: "125",
              LDLCholesterol: "114",
              serumCreatinine: "0.9",
              GFR: "89",
              AST: "22",
              ALT: "18",
              yGPT: "28",
              chestXrayResult: "정상",
              osteoporosis: "정상",
              evaluation: "정A",
            },
            {
              checkupDate: "2022-08-13",
              height: "175.5",
              weight: "73.8",
              waist: "82.4",
              BMI: "23.9",
              vision: "1.0/1.0",
              hearing: "정상/정상",
              bloodPressure: "125/84",
              proteinuria: "음성",
              hemoglobin: "15.0",
              fastingBloodGlucose: "95",
              totalCholesterol: "192",
              HDLCholesterol: "50",
              triglyceride: "132",
              LDLCholesterol: "118",
              serumCreatinine: "0.9",
              GFR: "88",
              AST: "24",
              ALT: "20",
              yGPT: "30",
              chestXrayResult: "정상",
              osteoporosis: "정상",
              evaluation: "정A",
            },
          ],
          referenceList: [
            {
              refType: "단위",
              height: "Cm",
              weight: "Kg",
              waist: "Cm",
              BMI: "kg/m²",
              vision: "",
              hearing: "",
              bloodPressure: "mmHg",
              proteinuria: "",
              hemoglobin: "g/dL",
              fastingBloodGlucose: "mg/dL",
              totalCholesterol: "mg/dL",
              HDLCholesterol: "mg/dL",
              triglyceride: "mg/dL",
              LDLCholesterol: "mg/dL",
              serumCreatinine: "mg/dL",
              GFR: "mL/min",
              AST: "U/L",
              ALT: "U/L",
              yGPT: "U/L",
              chestXrayResult: "",
              osteoporosis: "",
            },
            {
              refType: "정상(A)",
              height: "",
              weight: "",
              waist: "",
              BMI: "18.5-24.9",
              vision: "",
              hearing: "",
              bloodPressure: "120미만 이며/80미만",
              proteinuria: "음성",
              hemoglobin: "남: 13-16.5 / 여: 12-15.5",
              fastingBloodGlucose: "100미만",
              totalCholesterol: "200미만",
              HDLCholesterol: "60이상",
              triglyceride: "150미만",
              LDLCholesterol: "130미만",
              serumCreatinine: "1.6이하",
              GFR: "60이상",
              AST: "40이하",
              ALT: "35이하",
              yGPT: "남:11-63 / 여:8-35",
              chestXrayResult: "정상, 비활동성",
              osteoporosis: "T-score -1 이상",
            },
            {
              refType: "정상(B)",
              height: "",
              weight: "",
              waist: "",
              BMI: "18.5미만/25~29.9",
              vision: "",
              hearing: "",
              bloodPressure: "120-139 또는 /80-89",
              proteinuria: "약양성±",
              hemoglobin: "남: 12-12.9 / 여: 10-11.9",
              fastingBloodGlucose: "100-125",
              totalCholesterol: "200-239",
              HDLCholesterol: "40-59",
              triglyceride: "150-199",
              LDLCholesterol: "130-139",
              serumCreatinine: "",
              GFR: "",
              AST: "41-50",
              ALT: "36-45",
              yGPT: "남:64-77 / 여:36-45",
              chestXrayResult: "",
              osteoporosis: "-1~-2.5 초과",
            },
            {
              refType: "질환의심",
              height: "",
              weight: "",
              waist: "남 90이상 / 여 85이상",
              BMI: "30이상",
              vision: "",
              hearing: "",
              bloodPressure: "140이상 또는 /90이상",
              proteinuria: "양성(+1)이상",
              hemoglobin: "남:12.0미만 / 여:10.0미만",
              fastingBloodGlucose: "126이상",
              totalCholesterol: "240이상",
              HDLCholesterol: "40미만",
              triglyceride: "200이상",
              LDLCholesterol: "160이상",
              serumCreatinine: "1.6초과",
              GFR: "60미만",
              AST: "51이상",
              ALT: "46이상",
              yGPT: "남:78이상 / 여:46이상",
              chestXrayResult: "정상 및 비활동성이외의자",
              osteoporosis: "-2.5이하",
            },
          ],
          resultList: [
            {
              caseType: 0,
              checkupType: "일반",
              checkupDate: "2024-03-19",
              organizationName: "건강종합병원",
              pdfData: "",
              questionnaire: [],
              infantsCheckupList: [],
              infantsDentalList: [],
            },
            {
              caseType: 0,
              checkupType: "일반",
              checkupDate: "2023-01-11",
              organizationName: "헬스케어의원",
              pdfData: "",
              questionnaire: [],
              infantsCheckupList: [],
              infantsDentalList: [],
            },
            {
              caseType: 0,
              checkupType: "일반",
              checkupDate: "2022-08-13",
              organizationName: "튼튼병원",
              pdfData: "",
              questionnaire: [],
              infantsCheckupList: [],
              infantsDentalList: [],
            },
          ],
        },
      } satisfies GetMedicalCheckupAPIResponseBody);
    }
  }),
];
